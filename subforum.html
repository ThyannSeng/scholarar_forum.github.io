<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scholarship Subforum</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body,
    html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }

    .header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      border-bottom: 1px solid #d3d3d3;
    }

    .main-container {
      display: flex;
      height: calc(100% - 60px);
      margin-top: 60px;
    }

    .sidebar {
      width: 280px;
      padding: 8px;
      padding-left: 10px;
      border-right: 1px solid #d3d3d3;
      overflow-y: auto;
      background-color: #ffffff;
    }

    .menu-section {
      margin-bottom: 0px;
    }

    .menu-section h3 {
      text-transform: uppercase;
      font-size: 12px;
      color: #888;
      padding: 25px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .menu-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-left: 15px;
      padding-top: 10px;
      padding-bottom: 10px;
      padding-right: 5px;
      cursor: pointer;
      border-radius: 8px;
      transition: background-color 0.3s;
      color: #333;
      text-decoration: none;
    }

    .menu-item:hover {
      background-color: #f5f5f5;
    }

    .menu-item i {
      width: 20px;
      color: #888;
      margin-right: 10px;
    }

    .menu-item.active {
      background-color: #e8e8e8;
    }

    .submenu {
      padding: 0;
      display: none;
    }

    .submenu-item {
      padding: 8px 0;
      padding-left: 20px;
    }

    .submenu-item a {
      text-decoration: none;
      color: #555;
    }

    .submenu-item a:hover {
      text-decoration: underline;
    }

    .subsubmenu {
      margin-left: 20px;
      padding-left: 5px;
      border-left: 1px solid #d3d3d3;
      display: none;
    }

    .main-content {
      background-color: #ffffff;
      padding: 20px;
      border-radius: 5px;
      flex-grow: 1;
      overflow-y: auto;
    }

    .question-list h2 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .question-item {
      background-color: #f9fafb;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 10px;
    }

    .question-item h3 {
      font-size: 18px;
      font-weight: 500;
      color: #374151;
    }

    .question-item p {
      color: #555;
      margin: 5px 0;
    }

    .question-item a {
      color: #0d6efd;
      text-decoration: none;
    }

    .question-item a:hover {
      text-decoration: underline;
    }

    .toggle-btn {
      cursor: pointer;
    }

    .submenu {
      display: none;
    }

    .fa-chevron-up,
    .fa-chevron-down {
      position: relative;
      color: #888;
      right: -15px;
    }

    .sidebar-title {
      font-size: 24px;
      font-weight: bold;
      color: #333;
      margin-bottom: 5px;
    }

    .sidebar-description {
      font-size: 14px;
      color: #666;
      margin-bottom: 20px;
    }
  </style>
</head>
<body class="bg-gray-100">
  <header class="bg-white header">
    <div class="container mx-auto flex justify-between items-center py-1 px-5 lg:px-6">
      <div class="flex items-center">
        <a href="index.html">
          <img src="image/logo.jpg" alt="The Scholarar logo, a blue and green circle with a book and a graduation cap."
            style="width: 55px;">
        </a>
        <h1 class="text-2xl font-bold text-primary">Scholarar</h1>
        <div class="flex space-x-12 ml-8">
          <a href="index.html" class="text-zinc-700 hover:text-zinc-900">Scholarship</a>
          <a href="forum.html" class="text-gray-700 hover:text-primary">Forum</a>
        </div>
      </div>
      <div class="flex items-center">
        <div class="flex items-center space-x-4">
          <button class="p-2">üîç</button>
          <a href="scholarship_upload.html" class="p-2 text-zinc-700 hover:text-zinc-900"><i class="fas fa-upload"></i></a>
          <a href="https://web.facebook.com/scholarar" class="p-2 text-zinc-700 hover:text-zinc-900"><i class="fab fa-facebook"></i></a>
          <a href="https://t.me/scholarar" class="p-2 text-zinc-700 hover:text-zinc-900"><i class="fab fa-telegram"></i></a>
          <a href="https://www.tiktok.com/@scholararkh" class="p-2 text-zinc-700 hover:text-zinc-900"><i class="fab fa-tiktok"></i></a>
          <a href="http://www.Scholarar.com" class="text-gray-700 hover:text-primary">About Us</a>
          <a href="login.html" class="block bg-zinc-200 p-2 rounded text-center text-gray-800 font-semibold hover:bg-zinc-300 transition duration-300">Login</a>
        </div>
      </div>
    </div>
  </header>

  <div class="main-container">
    <aside class="sidebar" id="sidebar-menu">
      <!-- The scholarship title and description will be inserted here dynamically -->
    </aside>

    <div class="main-content">
      <div class="flex items-center justify-between border-b border-zinc-200 pb-4 mb-4">
        <h2 class="text-lg md:text-xl font-semibold">Questions</h2>
        <div class="flex">
          <div class="relative">
            <input id="search-input" type="text" placeholder="Quick search..."
              class="pl-4 pr-10 py-2 w-full md:w-64 bg-white text-zinc-700 placeholder-zinc-500 rounded-full border border-blue-700 focus:outline-none focus:border-blue-500" />
          </div>
        </div>
      </div>
      <div id="question-list" class="question-list">
        <!-- Questions will be dynamically inserted here -->
      </div>

      <!-- Pagination Controls -->
      <div class="flex justify-center mt-6">
        <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
          <button id="prev-btn"
            class="relative inline-flex items-center px-4 py-2 border border-zinc-300 text-sm font-medium text-zinc-500 bg-white hover:bg-zinc-50">
            Previous
          </button>
          <div id="pagination-numbers" class="flex space-x-1">
            <!-- Page numbers will be dynamically inserted here -->
          </div>
          <button id="next-btn"
            class="relative inline-flex items-center px-4 py-2 border border-zinc-300 text-sm font-medium text-zinc-500 bg-white hover:bg-zinc-50">
            Next
          </button>
        </nav>
      </div>

      <div class="related-scholarships bg-white p-6 rounded-lg shadow-lg mt-4">
        <h2>Related Scholarships</h2>
        <a href="subforum.html?id=2&subforumName=GKS%20Scholarship%202025">GKS Scholarship 2025</a>
        <!-- Add more related scholarships as needed -->
      </div>
    </div>
  </div>

  <script>
    const scholarships = [
      {
        id: 1,
        title: "MEXT Scholarship 2025",
        description: "Introduction or brief description about the scholarship, its importance, and impact.",
        questions: [
          {
            id: 101,
            title: "Does MEXT Scholarship cover living expenses?",
            description: "I want to know if the MEXT Scholarship provides any allowances for living expenses.",
          },
          {
            id: 102,
            title: "What are the eligibility criteria for MEXT Scholarship?",
            description: "Can someone explain the eligibility requirements for applying to the MEXT Scholarship?",
          }
        ]
      },
      {
        id: 2,
        title: "GKS Scholarship 2025",
        description: "Introduction or brief description about the scholarship, its importance, and impact.",
        questions: [
          {
            id: 201,
            title: "How to apply for GKS Scholarship?",
            description: "Can anyone provide a step-by-step guide on applying for the GKS Scholarship?",
          }
        ]
      }
    ];

    const menuData = [
      // {
      //   title: 'Home',
      //   icon: 'fas fa-home',
      //   link: 'index.html',
      //   active: false
      // },
      {
        title: 'Topics',
        icon: '',
        submenus: [
          {
            title: 'Internet Culture (Viral)',
            icon: 'fas fa-laugh',
            sublinks: [
              { title: 'Amazing', link: 'category.html?category=Amazing' },
              { title: 'Animals & Pets', link: 'category.html?category=Animals%20%26%20Pets' },
              { title: 'Cringe & Facepalm', link: 'category.html?category=Cringe%20%26%20Facepalm' },
              { title: 'Funny', link: 'category.html?category=Funny' },
              { title: 'Interesting', link: 'category.html?category=Interesting' },
              { title: 'Memes', link: 'category.html?category=Memes' },
              { title: 'Oddly Satisfying', link: 'category.html?category=Oddly%20Satisfying' },
              { title: 'Reddit Meta', link: 'category.html?category=Reddit%20Meta' },
              { title: 'Wholesome & Heartwarming', link: 'category.html?category=Wholesome%20%26%20Heartwarming' }
            ]
          },
          {
            title: 'Games',
            icon: 'fas fa-gamepad',
            sublinks: [
              { title: 'Games', link: 'category.html?category=Games' }
            ]
          },
          {
            title: 'Q&As',
            icon: 'fas fa-question-circle',
            sublinks: [
              { title: 'Q&As', link: 'category.html?category=Q%26As' },
              { title: 'Stories & Confessions', link: 'category.html?category=Stories%20%26%20Confessions' }
            ]
          },
          {
            title: 'Technology',
            icon: 'fas fa-cogs',
            sublinks: [
              { title: 'Technology', link: 'category.html?category=Technology' }
            ]
          },
          {
            title: 'Pop Culture',
            icon: 'fas fa-star',
            sublinks: [
              { title: 'Pop Culture', link: 'category.html?category=Pop%20Culture' }
            ]
          },
          {
            title: 'Movies & TV',
            icon: 'fas fa-film',
            sublinks: [
              { title: 'Movies & TV', link: 'category.html?category=Movies%20%26%20TV' }
            ]
          },
          // {
          //   title: 'More',
          //   link: 'category.html?category=More'
          // }
        ]
      },
      {
        title: 'Resources',
        icon: '',
        submenus: [
          {
            title: 'About Scholarar',
            icon: 'fas fa-info-circle',
            link: 'http://www.Scholarar.com'
          },
          {
            title: 'Advertise',
            icon: 'fas fa-bullhorn',
            link: 'advertise.html'
          },
          {
            title: 'Help',
            icon: 'fas fa-question',
            link: 'help.html'
          },
          {
            title: 'Blog',
            icon: 'fas fa-blog',
            link: 'blog.html'
          }
        ]
      }
    ];

    const itemsPerPage = 2;
    let currentPage = 1;
    let filteredQuestions = [];
    let currentScholarshipQuestions = [];

    const questionList = document.getElementById('question-list');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const paginationNumbers = document.getElementById('pagination-numbers');
    const searchInput = document.getElementById('search-input');

    const urlParams = new URLSearchParams(window.location.search);
    const scholarshipId = urlParams.get('id');
    const subforumName = urlParams.get('subforumName');

    const scholarship = scholarships.find(s => s.id === parseInt(scholarshipId));

    if (scholarship) {
      document.getElementById('sidebar-menu').insertAdjacentHTML('afterbegin', `
        <div class="sidebar-title">${scholarship.title}</div>
        <div class="sidebar-description">${scholarship.description}</div>
      `);
      currentScholarshipQuestions = scholarship.questions;
      filterQuestions();
    } else {
      document.getElementById('subforum-title').textContent = 'Scholarship not found';
    }

    function filterQuestions() {
      const searchTerm = searchInput.value.toLowerCase();
      filteredQuestions = currentScholarshipQuestions.filter(question =>
        question.title.toLowerCase().includes(searchTerm) ||
        question.description.toLowerCase().includes(searchTerm)
      );
      currentPage = 1;
      renderQuestions();
    }

    function renderQuestions() {
      const startIndex = (currentPage - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const currentQuestions = filteredQuestions.slice(startIndex, endIndex);

      questionList.innerHTML = currentQuestions.map(question => `
        <div class="question-item">
          <h3>${question.title}</h3>
          <p>${question.description}</p>
          <a href="subsubforum.html?scholarshipId=${scholarship.id}&questionId=${question.id}&subforumName=${encodeURIComponent(subforumName)}">View Discussion</a>
        </div>
      `).join('');

      prevBtn.disabled = currentPage === 1;
      nextBtn.disabled = currentPage === Math.ceil(filteredQuestions.length / itemsPerPage);

      renderPageNumbers();
    }

    function renderPageNumbers() {
      const totalPages = Math.ceil(filteredQuestions.length / itemsPerPage);
      paginationNumbers.innerHTML = '';

      for (let i = 1; i <= totalPages; i++) {
        const pageButton = document.createElement('button');
        pageButton.innerText = i;
        pageButton.classList.add('relative', 'inline-flex', 'items-center', 'px-4', 'py-2', 'border', 'text-sm', 'font-medium');

        if (i === currentPage) {
          pageButton.classList.add('z-10', 'bg-blue-50', 'border-blue-500', 'text-blue-600');
        } else {
          pageButton.classList.add('bg-white', 'border-zinc-300', 'text-zinc-500', 'hover:bg-zinc-50');
        }

        pageButton.addEventListener('click', () => {
          currentPage = i;
          renderQuestions();
        });

        paginationNumbers.appendChild(pageButton);
      }
    }

    prevBtn.addEventListener('click', () => {
      if (currentPage > 1) {
        currentPage--;
        renderQuestions();
      }
    });

    nextBtn.addEventListener('click', () => {
      if (currentPage < Math.ceil(filteredQuestions.length / itemsPerPage)) {
        currentPage++;
        renderQuestions();
      }
    });

    searchInput.addEventListener('input', filterQuestions);

    filterQuestions();

    function toggleMenu(menuId) {
      const submenu = document.getElementById(menuId);
      const icon = submenu.previousElementSibling.querySelector('.fa-chevron-down, .fa-chevron-up');
      if (submenu.style.display === 'none' || submenu.style.display === '') {
        submenu.style.display = 'block';
        if (icon) {
          icon.classList.remove('fa-chevron-down');
          icon.classList.add('fa-chevron-up');
        }
      } else {
        submenu.style.display = 'none';
        if (icon) {
          icon.classList.remove('fa-chevron-up');
          icon.classList.add('fa-chevron-down');
        }
      }
    }

    function renderMenu() {
      const sidebarMenu = document.getElementById('sidebar-menu');
      sidebarMenu.innerHTML += menuData.map(section => `
        <div class="menu-section">
          ${section.submenus ? `
            <h3 onclick="toggleMenu('${section.title.replace(/\s+/g, '-').toLowerCase()}-menu')">
              ${section.title}
              <i class="fas fa-chevron-down"></i>
            </h3>
            <div id="${section.title.replace(/\s+/g, '-').toLowerCase()}-menu" class="submenu">
              ${section.submenus.map(item => `
                <div class="menu-item toggle-btn" onclick="${item.sublinks ? `toggleMenu('${item.title.replace(/\s+/g, '-').toLowerCase()}-submenu')` : `window.location.href='${item.link}'`}">
                  <div style="display: flex; align-items: center;">
                    <i class="${item.icon}"></i>
                    <span>${item.title}</span>
                  </div>
                  ${item.sublinks ? '<i class="fas fa-chevron-down" style="font-size: 12px"></i>' : ''}
                </div>
                <div id="${item.title.replace(/\s+/g, '-').toLowerCase()}-submenu" class="subsubmenu">
                  ${item.sublinks ? item.sublinks.map(sublink => `
                    <div class="submenu-item"><a href="${sublink.link}">${sublink.title}</a></div>
                  `).join('') : ''}
                </div>
              `).join('')}
            </div>
          ` : `
            <a href="${section.link}" class="menu-item ${section.active ? 'active' : ''}">
              <div style="display: flex; align-items: center;">
                <i class="${section.icon}"></i>
                <span>${section.title}</span>
              </div>
            </a>
          `}
        </div>
      `).join('');
      
      // Auto-expand "Topics" and "Resources"
      document.querySelectorAll('.menu-section').forEach(section => {
        const h3 = section.querySelector('h3');
        if (h3 && (h3.innerText.toLowerCase().includes('topics') || h3.innerText.toLowerCase().includes('resources'))) {
          const submenu = section.querySelector('.submenu');
          submenu.style.display = 'block';
          h3.querySelector('i').classList.remove('fa-chevron-down');
          h3.querySelector('i').classList.add('fa-chevron-up');
        }
      });
    }

    renderMenu();
  </script>
</body>
</html>
